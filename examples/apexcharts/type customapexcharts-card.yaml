type: custom:apexcharts-card
graph_span: 36h
span:
  offset: +24h
now:
  show: true
  label: NÃ¥
header:
  show: true
  title: TidevannsnivÃ¥
  show_states: true
series:
  - entity: sensor.tidevann_prediksjon
    name: Tabell
    color: orange
    show:
      extremas: true
      in_header: before_now
      legend_value: false
    data_generator: |
      return entity.attributes.data.map((entry) => {
        return [new Date(entry.datetime).getTime(), entry.prediction];
      });
  - entity: sensor.tidevann_prognose
    name: Prognose
    color: blue
    show:
      in_header: before_now
      legend_value: false
    data_generator: |
      return entity.attributes.data.map((entry) => {
        return [new Date(entry.datetime).getTime(), entry.forecast];
      });
  - entity: sensor.tidevann_observasjon
    name: Observasjon
    color: red
    show:
      in_header: true
      legend_value: false
    extend_to: false
    data_generator: |
      const now = new Date().getTime();
      let filteredData = entity.attributes.data
        .filter(entry => new Date(entry.datetime).getTime() <= now) // ğŸ’¥ Fjerner fremtidige data
        .map(entry => {
          return [new Date(entry.datetime).getTime(), entry.observation];
        });

      return filteredData;
